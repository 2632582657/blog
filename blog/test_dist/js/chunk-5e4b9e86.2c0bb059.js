(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e4b9e86"],{2375:function(t,e,a){},"28a5":function(t,e,a){"use strict";var i=a("aae3"),s=a("cb7c"),o=a("ebd6"),r=a("0390"),n=a("9def"),l=a("5f1b"),u=a("520a"),d=a("79e5"),c=Math.min,m=[].push,h="split",f="length",p="lastIndex",v=4294967295,g=!d((function(){RegExp(v,"y")}));a("214f")("split",2,(function(t,e,a,d){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[f]||2!="ab"[h](/(?:ab)*/)[f]||4!="."[h](/(.?)(.?)/)[f]||"."[h](/()()/)[f]>1||""[h](/.?/)[f]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(s,t,e);var o,r,n,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=void 0===e?v:e>>>0,g=new RegExp(t.source,d+"g");while(o=u.call(g,s)){if(r=g[p],r>c&&(l.push(s.slice(c,o.index)),o[f]>1&&o.index<s[f]&&m.apply(l,o.slice(1)),n=o[0][f],c=r,l[f]>=h))break;g[p]===o.index&&g[p]++}return c===s[f]?!n&&g.test("")||l.push(""):l.push(s.slice(c)),l[f]>h?l.slice(0,h):l}:"0"[h](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,i){var s=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,s,i):b.call(String(s),a,i)},function(t,e){var i=d(b,t,this,e,b!==a);if(i.done)return i.value;var u=s(t),m=String(this),h=o(u,RegExp),f=u.unicode,p=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),C=new h(g?u:"^(?:"+u.source+")",p),k=void 0===e?v:e>>>0;if(0===k)return[];if(0===m.length)return null===l(C,m)?[m]:[];var y=0,x=0,_=[];while(x<m.length){C.lastIndex=g?x:0;var w,P=l(C,g?m:m.slice(x));if(null===P||(w=c(n(C.lastIndex+(g?0:x)),m.length))===y)x=r(m,x,f);else{if(_.push(m.slice(y,x)),_.length===k)return _;for(var $=1;$<=P.length-1;$++)if(_.push(P[$]),_.length===k)return _;x=y=w}}return _.push(m.slice(y)),_}]}))},"2cd8":function(t,e,a){"use strict";var i=a("2375"),s=a.n(i);s.a},"386d":function(t,e,a){"use strict";var i=a("cb7c"),s=a("83a1"),o=a("5f1b");a("214f")("search",1,(function(t,e,a,r){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var n=i(t),l=String(this),u=n.lastIndex;s(u,0)||(n.lastIndex=0);var d=o(n,l);return s(n.lastIndex,u)||(n.lastIndex=u),null===d?-1:d.index}]}))},4556:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-12 col-md-4 px-2 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords.id,expression:"keyWords.id"}],staticClass:"form-control form-control-sm rounded-0",attrs:{type:"text",maxlength:"15",placeholder:"ID"},domProps:{value:t.keyWords.id},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||t.$set(t.keyWords,"id",e.target.value)}}})]),a("div",{staticClass:"col-12 col-md-4 px-2 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords.name,expression:"keyWords.name"}],staticClass:"form-control form-control-sm rounded-0",attrs:{type:"text",minlength:"1",maxlength:"20",placeholder:"Name"},domProps:{value:t.keyWords.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||t.$set(t.keyWords,"name",e.target.value)}}})]),a("div",{staticClass:"col-12 col-md-4 px-2 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords.author,expression:"keyWords.author"}],staticClass:"form-control form-control-sm rounded-0",attrs:{type:"email",minlength:"1",maxlength:"20",placeholder:"Author"},domProps:{value:t.keyWords.author},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||t.$set(t.keyWords,"author",e.target.value)}}})]),a("div",{staticClass:"col px-2 text-left"},[a("button",{staticClass:"btn btn-secondary btn-sm text-white rounded",on:{click:function(e){return t.search()}}},[t._v("查找")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.isSearch,expression:"isSearch"}],staticClass:"btn btn-secondary btn-sm text-white rounded ml-2",on:{click:function(e){return t.back()}}},[t._v("返回")]),a("button",{staticClass:"btn btn-secondary btn-sm text-white rounded ml-2",attrs:{"data-toggle":"modal","data-target":"#audioModal"}},[t._v("添加歌曲")])])]),a("div",{attrs:{id:"table"}},[a("table",{staticClass:"table table-responsive-sm table-borderless"},[t._m(0),a("tbody",t._l(t.audioList,(function(e,i){return a("tr",{key:i,staticClass:"border-top border-bottom border-info"},[a("th",{attrs:{scope:"row"},domProps:{textContent:t._s(e.id)}}),a("td",{domProps:{textContent:t._s(e.name)}}),a("td",{domProps:{textContent:t._s(e.author)}}),a("td",{domProps:{textContent:t._s(e.create_time)}}),a("td",{staticClass:"d-flex justify-content-center align-items-center"},[a("button",{staticClass:"btn btn-info mr-2 btn-sm",attrs:{"data-toggle":"modal","data-target":"#updateBox"},on:{click:function(e){return t.deleteAudio(i)}}},[t._v("删除")])])])})),0)]),0===t.audioList.length?a("div",{staticClass:"my-5 text-warning text-center"},[a("span",{staticClass:"fa fa-warning"}),t._v(" 暂无结果\n    ")]):t._e()]),t.audioList&&0!==t.audioList.length?a("Pagination",{attrs:{control:{center:1},result:t.result},on:{func:t.func}}):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"audioModal",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body text-left"},[a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"audioName"}},[t._v("歌曲名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.name,expression:"audio.name"}],staticClass:"form-control",attrs:{id:"audioName",type:"text",placeholder:"根据文件名获取名称",minlength:"1",maxlength:"15",required:"",readonly:"true"},domProps:{value:t.audio.name},on:{input:function(e){e.target.composing||t.$set(t.audio,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"audioAvatar"}},[t._v("歌曲作者")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.author,expression:"audio.author"}],staticClass:"form-control",attrs:{id:"audioAvatar",type:"text",placeholder:"根据文件名获取作者",minlength:"1",maxlength:"15",required:"",readonly:"true"},domProps:{value:t.audio.author},on:{input:function(e){e.target.composing||t.$set(t.audio,"author",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("歌曲封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"cover",attrs:{src:t.audio.audioCover,width:"50%"}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"audioCover",attrs:{type:"file",id:"customFile"},on:{change:t.audioCoverChange}}),a("label",{staticClass:"text-info d-block cursor_p",attrs:{for:"customFile"}},[t._v("选择")])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("歌曲文件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.audioFileName,expression:"audio.audioFileName"}],staticClass:"form-control",attrs:{type:"text",readonly:"true"},domProps:{value:t.audio.audioFileName},on:{input:function(e){e.target.composing||t.$set(t.audio,"audioFileName",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"audio",attrs:{type:"file",id:"customAudio"},on:{change:t.audioChange}}),a("label",{staticClass:"text-info d-block cursor_p",attrs:{for:"customAudio"}},[t._v("选择")])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"d-block"},[t._v("歌词文件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.audioLrcName,expression:"audio.audioLrcName"}],staticClass:"form-control",attrs:{type:"text",readonly:"true"},domProps:{value:t.audio.audioLrcName},on:{input:function(e){e.target.composing||t.$set(t.audio,"audioLrcName",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"audioLrc",attrs:{type:"file",id:"customLrc"},on:{change:t.lrcChange}}),a("label",{staticClass:"text-info d-block cursor_p",attrs:{for:"customLrc"}},[t._v("选择")])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.isRepeat},on:{click:function(e){return t.submit()}}},[t._v("提交")])])])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ID")]),a("th",{attrs:{scope:"col"}},[t._v("名称")]),a("th",{attrs:{scope:"col"}},[t._v("作者")]),a("th",{attrs:{scope:"col"}},[t._v("记录时间")]),a("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"audioModalTitle"}},[t._v("上传歌曲信息")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("28a5"),a("7f7f"),a("386d"),a("6407"));function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"radio",data:function(){return{result:{},keyWords:{id:"",name:"",author:""},audio:{name:"",author:"",audioCover:"",audioFileName:"",audioLrcName:""},audioList:[],isSearch:!1,isHave:!0,isRepeat:!0}},created:function(){var t=this;this.getAudio(null,(function(e){t.audioList=e.data.audioList,t.result=e.data.page}))},methods:{func:function(t){var e=this;isSearch?this.search(t):this.getAudio({page:t},(function(t){e.audioList=t.data.audioList,e.result=t.data.page,e.isSearch=!1}))},getAudio:function(t,e){this.$http("getAudio?adm=1",{params:t},(function(t){200===t.data.code&&e(t.data)}))},audioCoverChange:function(t){var e=this;this.$imageChange(t,(function(t){e.audio.audioCover=t.target.result}))},audioChange:function(t){var e=this;if(t.target.files[0]&&"audio/mp3"===t.target.files[0].type){this.audio.audioFileName=t.target.files[0]?t.target.files[0].name:"";var a=t.target.files[0].name.split("-");this.audio.author=a[0].trim(),this.audio.name=a[1].slice(0,a[1].indexOf(".")).trim();var i=new FormData;i.append("name",this.audio.name),i.append("author",this.audio.author),this.$http("/audio",{method:"post",data:i},(function(t){200===t.data.code?e.isHave=!0:(e.$toast("当前歌曲已存在"),e.isHave=!1)}))}else this.$toast("请上传MP3文件")},lrcChange:function(t){t.target.files[0]&&-1!==t.target.files[0].name.lastIndexOf(".lrc")?this.audio.audioLrcName=t.target.files[0]?t.target.files[0].name:"":this.$toast("请上传lrc文件")},submit:function(){var t=this;if(this.isRepeat){var e=new FormData;if(0===this.$refs.audioCover.files.length)return void this.$toast("请上传音乐封面");if("image/jpeg"!==this.$refs.audioCover.files[0].type&&"image/jpg"!==this.$refs.audioCover.files[0].type&&"image/png"!==this.$refs.audioCover.files[0].type)return void this.$toast("请上传图片格式的封面");if(e.append("audioCover",this.$refs.audioCover.files[0]),0===this.$refs.audio.files.length)return void this.$toast("请上传音乐文件");e.append("audio",this.$refs.audio.files[0]),e.append("name",this.audio.name),e.append("author",this.audio.author),0!==this.$refs.audioLrc.files.length&&e.append("lrc",this.$refs.audioLrc.files[0]);var a={name:this.audio.name,author:this.audio.author};this.isHave?(this.isRepeat=!1,this.$http("/audio",{method:"post",data:e},(function(e){t.isRepeat=!0,200===e.data.code?(a.id=e.data.data.id,a.create_time=e.data.data.create_time,t.audioList.unshift(a),t.$toast("上传成功"),t.$("#audioModal").modal("hide"),t.$refs.audioCover.value="",t.$refs.audio.value="",t.$refs.audioLrc.value="",t.clearForm()):t.$toast(e.data.message)}))):this.$toast("当前歌曲已经存在")}else this.$toast("文件上传中，请勿重复提交")},search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.keyWords.id||this.keyWords.name||this.keyWords.author){var a=l({},this.keyWords);for(var i in a)""===a[i]&&delete a[i];this.getAudio(l({search:1,page:e},a),(function(e){t.audioList=e.data.audioList,t.result=e.data.page,t.isSearch=!0}))}else this.$toast("请输入关键字")},back:function(){var t=this;this.getAudio(null,(function(e){t.audioList=e.data.audioList,t.result=e.data.page,t.isSearch=!1}))},deleteAudio:function(t){var e=this;this.audioList[t].id&&confirm("是否要删除吗")&&this.$http("deleteAudio/".concat(this.audioList[t].id,"?adm=1"),(function(a){200===a.data.code?(e.$toast("删除成功"),e.audioList.splice(t,1)):e.$toast("删除失败"|a.data.message)}))},clearForm:function(){this.audio.name="",this.audio.author="",this.audio.audioCover="",this.audio.audioFileName="",this.audio.audioLrcName=""}},components:{Pagination:r["a"]}},d=u,c=(a("2cd8"),a("2877")),m=Object(c["a"])(d,i,s,!1,null,"2309ff8a",null);e["default"]=m.exports},6407:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.result.pageCount>1?a("nav",{staticClass:"mt-3",attrs:{"aria-label":"Page navigation example "}},[a("ul",{class:"pagination  "+(t.control.sm?"pagination-sm ":" ")+(t.control.center?"justify-content-center":"justify-content-end")},[a("li",{directives:[{name:"show",rawName:"v-show",value:0!==t.result.pageCount,expression:"result.pageCount!==0"}],class:"page-item "+(1===t.result.currentPage?"disabled":""),on:{click:function(e){return t.handlePageClick(t.result.currentPage-1)}}},[a("a",{staticClass:"page-link text-info",attrs:{href:"#"}},[t._v("<")])]),t.result.currentPage>4?a("li",{staticClass:"page-item mx-1 d-none d-b d-sm-block d-md-block d-lg-block d-xl-block",on:{click:function(e){return t.handlePageClick(1)}}},[a("a",{staticClass:"page-link ",attrs:{href:"#"}},[t._v("1")])]):t._e(),t.result.currentPage>4?a("li",{staticClass:"page-item mx-1 d-none d-sm-block d-md-block d-lg-block d-xl-block"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("...")])]):t._e(),t._l(t.result.pageCount,(function(e){return a("li",{directives:[{name:"show",rawName:"v-show",value:e>t.result.currentPage-3&&e<t.result.currentPage+3,expression:"item>result.currentPage-3&&item<result.currentPage+3"}],key:e,class:"page-item mx-1"+(e===t.result.currentPage?" active":""),on:{click:function(a){return t.handlePageClick(e)}}},[a("a",{staticClass:"page-link",style:e===t.result.currentPage?"pointer-events: none":"",attrs:{href:"javascript:;"},domProps:{textContent:t._s(e)}})])})),t.result.currentPage<t.result.pageCount-3?a("li",{staticClass:"page-item mx-1 d-none d-sm-block d-md-block d-lg-block d-xl-block"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("...")])]):t._e(),t.result.currentPage<t.result.pageCount-3?a("li",{staticClass:"page-item mx-1 d-none d-sm-block d-md-block d-lg-block d-xl-block",on:{click:function(e){return t.handlePageClick(t.result.pageCount)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"},domProps:{textContent:t._s(t.result.pageCount)}})]):t._e(),a("li",{class:"page-item "+(t.result.currentPage===t.result.pageCount?"disabled":""),on:{click:function(e){return t.handlePageClick(t.result.currentPage+1)}}},[a("a",{staticClass:"page-link text-info",attrs:{href:"#"}},[t._v(">")])])],2)]):t._e()},s=[],o={name:"pagination",data:function(){return{}},props:{result:Object,func:Function,control:Object},created:function(){},methods:{handlePageClick:function(t){this.result.pageCount>1&&t>=1&&t<=this.result.pageCount&&this.$emit("func",t)}}},r=o,n=(a("dcde"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"1eb0a941",null);e["a"]=l.exports},"7f7f":function(t,e,a){var i=a("86cc").f,s=Function.prototype,o=/^\s*function ([^ (]*)/,r="name";r in s||a("9e1e")&&i(s,r,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},dcde:function(t,e,a){"use strict";var i=a("f096"),s=a.n(i);s.a},f096:function(t,e,a){}}]);